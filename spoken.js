function spoken(){}(e=>{"use strict";"undefined"!=typeof window&&(window.spoken=spoken);const n=new(window.SpeechRecognition||window.webkitSpeechRecognition||Object);n.interimResults=!0,n.lang=navigator.language||"en-US",spoken.recognition=n,spoken.voices=async e=>new Promise((e=>{let n=speechSynthesis.getVoices();n.length&&e(n),speechSynthesis.onvoiceschanged=n=>e(speechSynthesis.getVoices())})),spoken.say=async(e,s="Alex")=>{const t=new SpeechSynthesisUtterance(e),o=await spoken.voices(),i=n.lang;return t.voice=s?(o.filter((e=>e.name==s))||o)[0]:(o.filter((e=>e.lang==i))||o)[0],new Promise((e=>{t.onend=async()=>e(t),speechSynthesis.speak(t)}))},spoken.listen=async(e={})=>(n.onstart=spoken.listen.startcb,n.onend=spoken.listen.endcb,n.onerror=spoken.listen.errorcb,n.continuous=e.continuous,new Promise(((e,s)=>{n.onresult=async n=>function(e,n){const s=e.results,t=[];for(let o=0;o<s.length;o++)t.push(s[o][0].transcript),s[o].isFinal&&n(s[o][0].transcript,e);spoken.listen.partialcb(t.join(""),e),t.length=0}(n,e);try{n.start()}catch(e){s(e)}}))),spoken.delay=e=>new Promise((n=>setTimeout(n,e))),spoken.listen.stop=async e=>{spoken.recognition.stop()},spoken.listen.on={partial:e=>spoken.listen.partialcb=e,start:e=>spoken.listen.startcb=e,end:e=>spoken.listen.endcb=e,error:e=>spoken.listen.errorcb=e},spoken.listen.partialcb=e=>!0,spoken.listen.startcb=e=>!0,spoken.listen.endcb=e=>!0,spoken.listen.errorcb=e=>!0,spoken.listen.available=e=>!!n.start})();