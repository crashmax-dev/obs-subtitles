!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,(()=>((e=>{const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n=+h("cleartime")||4,o=h("introtext")||"Start talking.",s=h("continuous")||"on",i=h("mic")||"on",r=h("language")||h("lang")||null,a=h("subkey")||"sub-c-79b0a26a-80a9-11e8-8f4a-96bbd71e7d14",l=h("pubkey")||"pub-c-fd9b97a4-7b78-4ae1-a21e-3614f2b6debe",u=h("channel")||username()||void setTimeout((e=>p("Missing configuration!<br><a href='https://github.com/stephenlb/twitch-tv-obs-subtitles/blob/master/readme.md#running-twitchtv-subtitles-from-local-files-on-your-hard-drive'>Follow Instructions</a>")),1e3)||t,c=h("maxwords")||250;let x=h("style")||"";setTimeout((e=>p(o)),10);let f=document.querySelector("#subtitle");function p(e){!function(e,t={}){requester({timeout:1e4})({url:["https://",y,"/publish/",l,"/",a,"/0/",e,"/0/",encodeURIComponent(JSON.stringify(t))].join("")})}(u,{phrase:m({phrase:e}),style:x})}function b(e){f.style=e}function m(e){return e&&e.style&&(x=e.style),b(x),e.style=x,f.innerHTML=function(e){return e.split(" ").slice(-c).join(" ")}(e.phrase),clearTimeout(m.ival),m.ival=setTimeout((async e=>{f.innerHTML=" ",spoken.listen.stop(),d()}),1e3*+n),f.innerHTML}async function d(){var e;await(e=200,new Promise((t=>setTimeout(t,e)))),spoken.listen({continuous:"on"==s}).then((e=>{p(e),used={}})).catch((e=>!0))}function h(e){const t={},n=location.href;return n.indexOf("?")<0?"":(n.split("?")[1].split("&").forEach((e=>{const n=e.split("=");t[n[0]]=n[1]})),e in t?decodeURIComponent(t[e]):"")}const y="ps"+(Math.random()+"").split(".")[1]+".pubnub.com";!async function(){var e;e=e=>m(e),subscribe({subkey:a,channel:u,message:t=>{t.m.forEach((t=>e(t.d)))}}),b(x),r&&(spoken.recognition.lang=r),"off"!=i&&(d(),spoken.listen.on.end(d),spoken.listen.on.error(d),spoken.listen.on.partial(p))}()})(),{})));